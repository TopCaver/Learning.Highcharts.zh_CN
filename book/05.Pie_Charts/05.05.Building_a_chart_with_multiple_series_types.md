## 绘制多数据序列图表

到目前为孩子，我们已经学习了折线图，柱状图和饼图。现在是时候使用这些表现形式绘制一个综合的图表了。这一届，我们使用2008到2011年的数据，绘制三种不同的图——柱状图，折线图和饼图。柱状图展现每年游戏的销售量。饼图用来展示每个提供商的销售占比。最后一个曲线图是展示每年新游戏数量的变化趋势。

为了将整个图表中每个游戏平台的颜色统一，我们需要为每个游戏平台指定一个颜色：
```javascript
    var wiiColor = '#BBBBBB';
    var x360Color = '#89A54E';
    var ps3Color = '#4572A7';
    var splineColor = '#FF66CC';
```

我们稍后会美化整个图表。首先，我们为背景铺上一层渐变颜色：
```javascript
    var chart = new Highcharts.Chart({
      chart: {
        renderTo: 'container',        
        borderWidth: 1,
        spacingTop: 40,
        backgroundColor: {
          linearGradient: { x1: 0, y1: 0, 
                   x2: 0, y2: 1 },
          stops: [ [ 0, '#0A0A0A' ],
               [ 1, '#303030' ] ]
        }
      },
```

然后我们移动柱状图到右边，空出左上角的位置留给一个图片（后面会提到）。

```javascript
      xAxis: {
        minPadding: 0.2,
        tickInterval: 1,
        labels: {
          formatter: function() {            
            return this.value;
            },  
          style: {
           color: '#CFCFCF'
          } 
        }
      }
```

下一个任务是创建足够的空间给饼图，让饼图可以放置在柱状图的上面。可以通过下面设置y轴的maxPadding方式完成：

```javascript
      yAxis: [{
        title: {
          text: 'Number of games sold',
          align: 'low',
          style: {           
            color: '#CFCFCF'
          }
        },
        labels: {
          style: {
           color: '#CFCFCF'
          }
        },
        maxPadding: 0.5
      }, {
        title: {
          text: 'Number of games released',
          style: {           
           color: splineColor
          } 
        },
        labels: {
          style: {
           color: splineColor
          } 
        },
        maxPadding: 0.5,
        opposite: true
      }],
```

每一个饼图都是一个独立的饼图，并且和下面的柱状图对齐，也是和下面的年份对齐。这个可以调整center设置饼图的中心位置来确定。我们还需要减少饼图的尺寸，好让图的其他部分也能放到绘图区里。我们将设置size选项，设置size的百分比属性。这个百分比，是指饼图相对于绘图区域的比例：

```javascript
      series:[{
        type: 'pie',
        name: 'Hardware 2011',
        size: '25%',
        center: [ '88%', '20%' ],
        data: [{ name: 'PS3', y: 14128407, 
             color: ps3Color }, 
            { name: 'X360', y: 13808365, 
             color: x360Color }, 
            { name: 'Wii', y: 11567105, 
             color: wiiColor } ],
        .....
```

曲线的坐标定义在y轴的另外一边。为了能更清楚的表现第二坐标系，我们为线、坐标轴和标签都指定一个新的颜色：
```javascript
      {  name: "Game released",
        type: 'spline',
        showInLegend: false,
        lineWidth: 3,
        yAxis: 1,
        color: splineColor,
        pointStart: 2008, 
        pointInterval: 1,
        data: [ 1170, 2076, 1551, 1378 ]
      }, 
```

我们使用renderer.image方法，将一个图片插入到图表当中，并且在z轴上位于上层，这月坐标轴的线就不会展示在图片上面了。我们使用svg图取代png。这种图片可以保持边界清晰避免在图表拉伸过程中，图片像素化。

```javascript
    chart.renderer.image('./pacman.svg', 0,
               0, 200, 200).attr({
       'zIndex': 10 
    }).add();
```

下面这是插入一幅吃豆人图片之后，整个游戏图表数据的样子：

![image](images/05_07.png)

### 创建股票大转盘
股票转盘图是一个经济图表，由投资者情报 (http://www.investorsintelligence.co.uk/wheel/) 创建，图标提供交互方式展示股票市场指数的概况和细节。下面就是一幅股票转盘：
 
![image](images/05_10.png)

基本上，它是"开放式"的圆环图表。每个扇区表示蓝筹公司，所有扇区宽度都相等。基于股票表现的得分，每个扇区分属不同的颜色带 (从红色，橙色，绿色，蓝色) 。当用户将鼠标悬停在公司名称上时，会出现更大的扇区，公司名称和股票细节。虽然这令人印象深刻的图表是使用 Adobe Flash 实现的，然而现在，我们要试试运气，看看Highcharts 是否也可以绘制如此的报表。我们重点关注圆环图的实现，圆环中间的图表作为练习留给读者。